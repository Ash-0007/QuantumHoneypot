<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post-Quantum Cognitive Decoys - Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #333;
        }
        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin: 8px 0;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Post-Quantum Cognitive Decoys</h1>
    
    <div class="card">
        <h2>API Status</h2>
        <button onclick="checkStatus()">Check Status</button>
        <pre id="status-result">Click the button to check API status...</pre>
    </div>
    
    <div class="card">
        <h2>Generate Decoys</h2>
        <div>
            <label for="target">Target Text:</label>
            <input type="text" id="target" name="target" value="kyber768">
        </div>
        <div>
            <label for="complexity">Complexity:</label>
            <select id="complexity" name="complexity">
                <option value="1">1 (Low)</option>
                <option value="3">3</option>
                <option value="5" selected>5 (Medium)</option>
                <option value="7">7</option>
                <option value="10">10 (High)</option>
            </select>
        </div>
        <div>
            <label for="count">Number of Decoys:</label>
            <input type="number" id="count" name="count" value="5" min="1" max="20">
        </div>
        <button onclick="generateDecoys()">Generate Decoys</button>
        <pre id="decoy-result">Fill in the form and click Generate to see results...</pre>
    </div>
    
    <div class="card">
        <h2>Generate Key Pair</h2>
        <div>
            <label for="algorithm">Algorithm:</label>
            <select id="algorithm" name="algorithm">
                <option value="kyber" selected>Kyber</option>
                <option value="saber">Saber</option>
                <option value="ntru">NTRU</option>
            </select>
        </div>
        <div>
            <label for="decoy-count">Number of Decoys:</label>
            <input type="number" id="decoy-count" name="decoy-count" value="3" min="1" max="10">
        </div>
        <button onclick="generateKeyPair()">Generate Key Pair</button>
        <pre id="key-result">Click to generate a key pair...</pre>
    </div>
    
    <script>
        async function checkStatus() {
            const statusResult = document.getElementById('status-result');
            statusResult.textContent = 'Loading...';
            
            try {
                // Try Go API
                try {
                    const goResponse = await fetch('http://localhost:8083/api/status');
                    const goData = await goResponse.json();
                    statusResult.textContent = 'Go API Status: ' + JSON.stringify(goData, null, 2);
                } catch (goError) {
                    statusResult.textContent = 'Go API Error: ' + goError.message;
                }
                
                // Try Flask API if available
                try {
                    const response = await fetch('http://localhost:5000/health');
                    const data = await response.json();
                    statusResult.textContent += '\n\nFlask API Status: ' + JSON.stringify(data, null, 2);
                } catch (flaskError) {
                    statusResult.textContent += '\n\nFlask API: Not available';
                }
            } catch (error) {
                statusResult.textContent = 'Error: ' + error.message;
            }
        }
        
        async function generateDecoys() {
            const target = document.getElementById('target').value;
            const complexity = document.getElementById('complexity').value;
            const count = document.getElementById('count').value;
            const decoyResult = document.getElementById('decoy-result');
            
            if (!target) {
                decoyResult.textContent = 'Please enter a target text.';
                return;
            }
            
            decoyResult.textContent = 'Generating decoys...';
            
            try {
                const goResponse = await fetch('http://localhost:8083/api/decoys/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        target: target,
                        complexity: parseInt(complexity),
                        count: parseInt(count)
                    })
                });
                
                const goData = await goResponse.json();
                decoyResult.textContent = 'Response: ' + JSON.stringify(goData, null, 2);
            } catch (error) {
                decoyResult.textContent = 'Error: ' + error.message;
            }
        }
        
        async function generateKeyPair() {
            const algorithm = document.getElementById('algorithm').value;
            const count = document.getElementById('decoy-count').value;
            const keyResult = document.getElementById('key-result');
            
            keyResult.textContent = 'Generating key pair...';
            
            try {
                const response = await fetch('http://localhost:8083/api/keys/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        algorithm: algorithm,
                        count: parseInt(count)
                    })
                });
                
                const data = await response.json();
                keyResult.textContent = 'Response: ' + JSON.stringify(data, null, 2);
            } catch (error) {
                keyResult.textContent = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html> 